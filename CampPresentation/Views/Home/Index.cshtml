@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row user-info">
    <div class="col-md-2">
        @if(ViewBag.Profile.Avatar != null)
        {
            @Html.Raw("<img style='width:145px; height:240px;' src=\"data:image/jpg;base64," + Convert.ToBase64String(ViewBag.Profile.Avatar) + "\" />")
        }
    </div>
    <div class="col-md-10">
        <p>@ViewBag.Profile.FirstName @ViewBag.Profile.LastName</p>
        @*<p>@ViewBag.User.BirthDate</p>*@
        <p>Адрес: @ViewBag.Profile.Address, Skype: @ViewBag.Profile.Skype, Телефон: @ViewBag.Profile.Phone</p>
        <p>@ViewBag.Profile.AdditionalInformation</p>
    </div>
</div>

<div class="panel-group">
    @if (ViewBag.Posts != null)
    {
        foreach (var a in ViewBag.Posts)
        {
            <div class="panel panel-info">
                <div class="panel-heading">Место отдыха: @a.CampPlaceName </div>
                <div class="panel-body">@a.Text</div>
                <div class="panel-footer">@a.CreationDate    Id статьи: @a.Id
                    <a class="pull-right btn btn-danger btn-xs" href="/Article/Delete/@a.Id">Удалить обзор</a>
                    <a id="comment" class="pull-right btn btn-info btn-xs">Комментировать</a>
                </div>
            </div>
            <form id="comment-area" method="post" hidden class="comment-area" action="">
                <div class="form-group">
                    <input type="hidden" name="PostId" value="@a.Id" />
                    <textarea class="form-control" name="Text"></textarea>
                </div>
                <input id="sub" class="btn btn-success" type="submit" value="Комментировать" />
            </form>
            if (a.Messages != null)
            {
                <dl class="col-md-offset-1 dl-comment">
                    @foreach(var message in a.Messages)
                    {
                    <dt>@message.FirstName @message.LastName в @message.Date <a class="btn btn-xs btn-danger" href="/Home/DeleteComment/?messageId=@message.Id&postId=@a.Id">x</a></dt>
                    <dd> - @message.Text</dd>
                    }
                </dl>
            }
        }
    }
</div>

<script type="text/javascript">

    var com = document.getElementById("comment");
    var sub = document.getElementById("sub");
    var area = document.getElementById("comment-area");

    com.onclick = function ()
    {
        area.hidden = !area.hidden;
    }

    sub.onclick = function ()
    {
        area.hidden = true;
    }

</script>


